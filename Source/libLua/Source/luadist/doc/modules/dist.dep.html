<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/dist.html">dist</a>
	</li>

	<li><strong>dist.dep</strong></li>
	
	<li>
		<a href="../modules/dist.fetch.html">dist.fetch</a>
	</li>

	<li>
		<a href="../modules/dist.log.html">dist.log</a>
	</li>

	<li>
		<a href="../modules/dist.manifest.html">dist.manifest</a>
	</li>

	<li>
		<a href="../modules/dist.package.html">dist.package</a>
	</li>

	<li>
		<a href="../modules/dist.persist.html">dist.persist</a>
	</li>

	<li>
		<a href="../modules/dist.sys.html">dist.sys</a>
	</li>

</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>dist.dep</code></h1>

<p>Dependency handling functions. Dependencies are represented in LuaDist through strings with a dist name followed by a comma-separated list of constraints. Each constraint consists of an operator and a version number. In this string format, version numbers are represented as naturally as possible, like they are used by upstream projects (e.g. "2.0beta3"). Internally, LuaDist converts them to a purely numeric representation, allowing comparison following some "common sense" heuristics. The precise specification of the comparison criteria is the source code of this module, but the test/test_deps.lua file included with LuaDist provides some insights on what these criteria are.</p>





<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#__eq">__eq</a>&nbsp;(v1, v2)</td>
	<td class="summary">Equality comparison for versions.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#__lt">__lt</a>&nbsp;(v1, v2)</td>
	<td class="summary">Size comparison for versions.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#compareVersions">compareVersions</a>&nbsp;(a, b)</td>
	<td class="summary">Utility function to compare version numbers given as strings.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#constrain">constrain</a>&nbsp;(version, constraints)</td>
	<td class="summary">Check if a version string is satisfied by a constraint string.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#matchConstraints">matchConstraints</a>&nbsp;(version, constraints)</td>
	<td class="summary">Check if a version satisfies a set of constraints.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#parseConstraint">parseConstraint</a>&nbsp;(input)</td>
	<td class="summary">Consumes a constraint from a string, converting it to table format.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#parseConstraints">parseConstraints</a>&nbsp;(input)</td>
	<td class="summary">Convert a list of constraints from string to table format.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#parseVersion">parseVersion</a>&nbsp;(vstring)</td>
	<td class="summary">Parse a version string, converting to table format.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#partialMatch">partialMatch</a>&nbsp;(version, requested)</td>
	<td class="summary">A more lenient check for equivalence between versions.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#split">split</a>&nbsp;(name)</td>
	<td class="summary">Split dist name into name and constraints.</td>
	</tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="__eq"></a><strong>__eq</strong>&nbsp;(v1, v2)</dt>
<dd>
Equality comparison for versions. All version numbers must be equal. If both versions have revision numbers, they must be equal; otherwise the revision number is ignored.


<h3>Parameters</h3>
<ul>
	
	<li>
	  v1: table: version table to compare.
	</li>
	
	<li>
	  v2: table: version table to compare.
	</li>
	
</ul>






<h3>Return value:</h3>
boolean: true if they are considered equivalent.



</dd>




<dt><a name="__lt"></a><strong>__lt</strong>&nbsp;(v1, v2)</dt>
<dd>
Size comparison for versions. All version numbers are compared. If both versions have revision numbers, they are compared; otherwise the revision number is ignored.


<h3>Parameters</h3>
<ul>
	
	<li>
	  v1: table: version table to compare.
	</li>
	
	<li>
	  v2: table: version table to compare.
	</li>
	
</ul>






<h3>Return value:</h3>
boolean: true if v1 is considered lower than v2.



</dd>




<dt><a name="compareVersions"></a><strong>compareVersions</strong>&nbsp;(a, b)</dt>
<dd>
Utility function to compare version numbers given as strings.


<h3>Parameters</h3>
<ul>
	
	<li>
	  a: string: one version.
	</li>
	
	<li>
	  b: string: another version.
	</li>
	
</ul>






<h3>Return value:</h3>
boolean: True if a > b.



</dd>




<dt><a name="constrain"></a><strong>constrain</strong>&nbsp;(version, constraints)</dt>
<dd>
Check if a version string is satisfied by a constraint string.


<h3>Parameters</h3>
<ul>
	
	<li>
	  version: string: A version in string format
	</li>
	
	<li>
	  constraints: string: Constraints in string format.
	</li>
	
</ul>






<h3>Return value:</h3>
boolean: True if version satisfies all constraints, false otherwise.



</dd>




<dt><a name="matchConstraints"></a><strong>matchConstraints</strong>&nbsp;(version, constraints)</dt>
<dd>
Check if a version satisfies a set of constraints.


<h3>Parameters</h3>
<ul>
	
	<li>
	  version: table: A version in table format
	</li>
	
	<li>
	  constraints: table: An array of constraints in table format.
	</li>
	
</ul>






<h3>Return value:</h3>
boolean: True if version satisfies all constraints, false otherwise.



</dd>




<dt><a name="parseConstraint"></a><strong>parseConstraint</strong>&nbsp;(input)</dt>
<dd>
Consumes a constraint from a string, converting it to table format. For example, a string ">= 1.0, > 2.0" is converted to a table in the format {op = ">=", version={1,0}} and the rest, "> 2.0", is returned back to the caller.


<h3>Parameters</h3>
<ul>
	
	<li>
	  input: string: A list of constraints in string format.
	</li>
	
</ul>






<h3>Return value:</h3>
(table, string) or nil: A table representing the same constraints and the string with the unused input, or nil if the input string is invalid.



</dd>




<dt><a name="parseConstraints"></a><strong>parseConstraints</strong>&nbsp;(input)</dt>
<dd>
Convert a list of constraints from string to table format. For example, a string ">= 1.0, < 2.0" is converted to a table in the format {{op = ">=", version={1,0}}, {op = "<", version={2,0}}}. Version tables use a metatable allowing later comparison through relational operators.


<h3>Parameters</h3>
<ul>
	
	<li>
	  input: string: A list of constraints in string format.
	</li>
	
</ul>






<h3>Return value:</h3>
table or nil: A table representing the same constraints, or nil if the input string is invalid.



</dd>




<dt><a name="parseVersion"></a><strong>parseVersion</strong>&nbsp;(vstring)</dt>
<dd>
Parse a version string, converting to table format. A version table contains all components of the version string converted to numeric format, stored in the array part of the table. If the version contains a revision, it is stored numerically in the 'revision' field. The original string representation of the string is preserved in the 'string' field. Returned version tables use a metatable allowing later comparison through relational operators.


<h3>Parameters</h3>
<ul>
	
	<li>
	  vstring: string: A version number in string format.
	</li>
	
</ul>






<h3>Return value:</h3>
table or nil: A version table or nil if the input string contains invalid characters.



</dd>




<dt><a name="partialMatch"></a><strong>partialMatch</strong>&nbsp;(version, requested)</dt>
<dd>
A more lenient check for equivalence between versions. This returns true if the requested components of a version match and ignore the ones that were not given. For example, when requesting "2", then "2", "2.1", "2.3.5-9"... all match. When requesting "2.1", then "2.1", "2.1.3" match, but "2.2" doesn't.


<h3>Parameters</h3>
<ul>
	
	<li>
	  version: string or table: Version to be tested; may be in string format or already parsed into a table.
	</li>
	
	<li>
	  requested: string or table: Version requested; may be in string format or already parsed into a table.
	</li>
	
</ul>






<h3>Return value:</h3>
boolean: True if the tested version matches the requested version, false otherwise.



</dd>




<dt><a name="split"></a><strong>split</strong>&nbsp;(name)</dt>
<dd>
Split dist name into name and constraints.


<h3>Parameters</h3>
<ul>
	
	<li>
	  name: string: A string containing name and version constraints eg. "lua-5.1.4" or "luajit >= 1.0 < 2.0"
	</li>
	
</ul>






<h3>Return value:</h3>
string, string: Returns separated name and constraints



</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
