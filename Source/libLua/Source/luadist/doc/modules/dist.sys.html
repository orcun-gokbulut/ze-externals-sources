<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>Reference</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h1>LuaDoc</h1>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h1>Modules</h1>
<ul>

	<li>
		<a href="../modules/dist.html">dist</a>
	</li>

	<li>
		<a href="../modules/dist.dep.html">dist.dep</a>
	</li>

	<li>
		<a href="../modules/dist.fetch.html">dist.fetch</a>
	</li>

	<li>
		<a href="../modules/dist.log.html">dist.log</a>
	</li>

	<li>
		<a href="../modules/dist.manifest.html">dist.manifest</a>
	</li>

	<li>
		<a href="../modules/dist.package.html">dist.package</a>
	</li>

	<li>
		<a href="../modules/dist.persist.html">dist.persist</a>
	</li>

	<li><strong>dist.sys</strong></li>
	
</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module <code>dist.sys</code></h1>

<p>Host system dependent commands. Override the default UNIX commands if needed for your platform. Commands currently depend on popen and unzip being available. For future releases we would like to use lua packages handling the compression issues. Additionally some filesystem functionality not available in luafilesystem is emulated here.</p>





<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#Q">Q</a>&nbsp;(arg)</td>
	<td class="summary">Quote argument for shell processing (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#Q">Q</a>&nbsp;(arg)</td>
	<td class="summary">Quote argument for shell processing (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#copy">copy</a>&nbsp;(src, dest)</td>
	<td class="summary">Recursive copy a file or directory (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#copy">copy</a>&nbsp;(src, dest)</td>
	<td class="summary">Recursive copy a file or directory (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#curDir">curDir</a>&nbsp;()</td>
	<td class="summary">Get current directory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#delete">delete</a>&nbsp;(dir)</td>
	<td class="summary">Delete a file or a directory and all its contents (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#delete">delete</a>&nbsp;(dir)</td>
	<td class="summary">Delete a file or a directory and all its contents (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#dir">dir</a>&nbsp;(dir, path)</td>
	<td class="summary">List the contents of a directory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#execute">execute</a>&nbsp;(command, ...)</td>
	<td class="summary">Run the given system command, quoting its arguments.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#executeString">executeString</a>&nbsp;(cmd)</td>
	<td class="summary">Run the given system command.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#exists">exists</a>&nbsp;(dir, path)</td>
	<td class="summary">Test for existance of a file.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#forceDelete">forceDelete</a>&nbsp;(src)</td>
	<td class="summary">Force delete a file, even if it is open.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#getZipFile">getZipFile</a>&nbsp;(zipfile, file)</td>
	<td class="summary">Extract file contents of a file from archive </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#isDir">isDir</a>&nbsp;(dir, path)</td>
	<td class="summary">Test is pathname is a directory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#isFile">isFile</a>&nbsp;(dir, path)</td>
	<td class="summary">Test is pathname is a file.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#list">list</a>&nbsp;(dir, path)</td>
	<td class="summary">Recursively list the contents of a directory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#makeDir">makeDir</a>&nbsp;(dir)</td>
	<td class="summary">Create a directory.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#makeStart">makeStart</a>&nbsp;(dest)</td>
	<td class="summary">Create environment startup script (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#makeStart">makeStart</a>&nbsp;(dest)</td>
	<td class="summary">Create environment startup script (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#move">move</a>&nbsp;(src, dest)</td>
	<td class="summary">Move a file from one location to another (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#move">move</a>&nbsp;(src, dest)</td>
	<td class="summary">Move a file from one location to another (Windows).</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#path">path</a>&nbsp;(...)</td>
	<td class="summary">Compose full system path or part of url </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#pathLen">pathLen</a>&nbsp;(dir)</td>
	<td class="summary">little helper function to get file depth (for directories its +1) </td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#relLink">relLink</a>&nbsp;(src, dest, from)</td>
	<td class="summary">Relatively Link file or directory contents to destination.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#unzip">unzip</a>&nbsp;(archive, dest)</td>
	<td class="summary">Unpack an archive.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#zip">zip</a>&nbsp;(workdir, zipfile, ...)</td>
	<td class="summary">Compress files in a .zip archive.</td>
	</tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="Q"></a><strong>Q</strong>&nbsp;(arg)</dt>
<dd>
Quote argument for shell processing (Windows). Adds single quotes and escapes.


<h3>Parameters</h3>
<ul>
	
	<li>
	  arg: string: Unquoted argument.
	</li>
	
</ul>






<h3>Return value:</h3>
string: Quoted argument.



</dd>




<dt><a name="Q"></a><strong>Q</strong>&nbsp;(arg)</dt>
<dd>
Quote argument for shell processing (Windows). Adds single quotes and escapes.


<h3>Parameters</h3>
<ul>
	
	<li>
	  arg: string: Unquoted argument.
	</li>
	
</ul>






<h3>Return value:</h3>
string: Quoted argument.



</dd>




<dt><a name="copy"></a><strong>copy</strong>&nbsp;(src, dest)</dt>
<dd>
Recursive copy a file or directory (Windows).


<h3>Parameters</h3>
<ul>
	
	<li>
	  src: string: Pathname of source
	</li>
	
	<li>
	  dest: string: Pathname of destination. If `src` is a directory, copies contents of `src` into contents of directory `dest`.  Otherwise, both must represent files.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="copy"></a><strong>copy</strong>&nbsp;(src, dest)</dt>
<dd>
Recursive copy a file or directory (Windows).


<h3>Parameters</h3>
<ul>
	
	<li>
	  src: string: Pathname of source
	</li>
	
	<li>
	  dest: string: Pathname of destination. If `src` is a directory, copies contents of `src` into contents of directory `dest`.  Otherwise, both must represent files.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="curDir"></a><strong>curDir</strong>&nbsp;()</dt>
<dd>
Get current directory.







<h3>Return value:</h3>
string: current direcotry.



</dd>




<dt><a name="delete"></a><strong>delete</strong>&nbsp;(dir)</dt>
<dd>
Delete a file or a directory and all its contents (Windows). For safety, this only accepts absolute paths.


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: string: Pathname of the file or directory to delete
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message. Returns success if already deleted.



</dd>




<dt><a name="delete"></a><strong>delete</strong>&nbsp;(dir)</dt>
<dd>
Delete a file or a directory and all its contents (Windows). For safety, this only accepts absolute paths.


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: string: Pathname of the file or directory to delete
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message. Returns success if already deleted.



</dd>




<dt><a name="dir"></a><strong>dir</strong>&nbsp;(dir, path)</dt>
<dd>
List the contents of a directory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: 
	</li>
	
	<li>
	  path: string: directory to list if not specified the current directory will be used.
	</li>
	
</ul>






<h3>Return value:</h3>
table: an array of strings with the filenames representing the contents of a directory.



</dd>




<dt><a name="execute"></a><strong>execute</strong>&nbsp;(command, ...)</dt>
<dd>
Run the given system command, quoting its arguments. The command is executed in the current directory in the dir stack.


<h3>Parameters</h3>
<ul>
	
	<li>
	  command: string: The command to be executed. No quoting/escaping need to be applied.
	</li>
	
	<li>
	  ...: strings: containing additional arguments, which are quoted.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="executeString"></a><strong>executeString</strong>&nbsp;(cmd)</dt>
<dd>
Run the given system command. The command is executed in the current directory in the dir stack.


<h3>Parameters</h3>
<ul>
	
	<li>
	  cmd: string: No quoting/escaping is applied to the command.
	</li>
	
</ul>






<h3>Return value:</h3>
boolean: True if command succeeds, false otherwise.



</dd>




<dt><a name="exists"></a><strong>exists</strong>&nbsp;(dir, path)</dt>
<dd>
Test for existance of a file.


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: 
	</li>
	
	<li>
	  path: string: filename to test
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="forceDelete"></a><strong>forceDelete</strong>&nbsp;(src)</dt>
<dd>
Force delete a file, even if it is open. If the file can't be deleted because it is currently open, this function will try to rename the file to a temporary file in the same directory. Windows in particular doesn't allow running executables to be deleted, but it does allow them to be renamed.  Cygwin 1.7 (unlike 1.5) does allow such deletion but internally implements it via a mechanism like this.  For futher details, see http://sourceforge.net/mailarchive/message.php?msg_name=bc4ed2190909261323i7c6280bfp6e7be6f70c713b0c%40mail.gmail.com 


<h3>Parameters</h3>
<ul>
	
	<li>
	  src: - file name
	</li>
	
</ul>








</dd>




<dt><a name="getZipFile"></a><strong>getZipFile</strong>&nbsp;(zipfile, file)</dt>
<dd>
Extract file contents of a file from archive


<h3>Parameters</h3>
<ul>
	
	<li>
	  zipfile: string: pathname of .zip/.dist archive to read from.
	</li>
	
	<li>
	  file: string: file to get contents of.
	</li>
	
</ul>






<h3>Return value:</h3>
contents, err: returns contents of file or false and error message. Requires io.popen (2DO: work when io.popen not available?)



</dd>




<dt><a name="isDir"></a><strong>isDir</strong>&nbsp;(dir, path)</dt>
<dd>
Test is pathname is a directory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: 
	</li>
	
	<li>
	  path: string: pathname to test
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="isFile"></a><strong>isFile</strong>&nbsp;(dir, path)</dt>
<dd>
Test is pathname is a file.


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: 
	</li>
	
	<li>
	  path: string: pathname to test
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="list"></a><strong>list</strong>&nbsp;(dir, path)</dt>
<dd>
Recursively list the contents of a directory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: 
	</li>
	
	<li>
	  path: string: directory to list if not specified the current directory will be used
	</li>
	
</ul>






<h3>Return value:</h3>
table: an array of strings representing the contents of the directory structure



</dd>




<dt><a name="makeDir"></a><strong>makeDir</strong>&nbsp;(dir)</dt>
<dd>
Create a directory.


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: string: Path to create.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message. Succeeds if already exists.



</dd>




<dt><a name="makeStart"></a><strong>makeStart</strong>&nbsp;(dest)</dt>
<dd>
Create environment startup script (Windows).


<h3>Parameters</h3>
<ul>
	
	<li>
	  dest: string: Dir to generate the file in.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="makeStart"></a><strong>makeStart</strong>&nbsp;(dest)</dt>
<dd>
Create environment startup script (Windows).


<h3>Parameters</h3>
<ul>
	
	<li>
	  dest: string: Dir to generate the file in.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="move"></a><strong>move</strong>&nbsp;(src, dest)</dt>
<dd>
Move a file from one location to another (Windows).


<h3>Parameters</h3>
<ul>
	
	<li>
	  src: string: Pathname of source.
	</li>
	
	<li>
	  dest: string: Pathname of destination.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="move"></a><strong>move</strong>&nbsp;(src, dest)</dt>
<dd>
Move a file from one location to another (Windows).


<h3>Parameters</h3>
<ul>
	
	<li>
	  src: string: Pathname of source.
	</li>
	
	<li>
	  dest: string: Pathname of destination.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="path"></a><strong>path</strong>&nbsp;(...)</dt>
<dd>
Compose full system path or part of url


<h3>Parameters</h3>
<ul>
	
	<li>
	  ...: 
	</li>
	
</ul>






<h3>Return value:</h3>
string: Path string



</dd>




<dt><a name="pathLen"></a><strong>pathLen</strong>&nbsp;(dir)</dt>
<dd>
little helper function to get file depth (for directories its +1)


<h3>Parameters</h3>
<ul>
	
	<li>
	  dir: 
	</li>
	
</ul>








</dd>




<dt><a name="relLink"></a><strong>relLink</strong>&nbsp;(src, dest, from)</dt>
<dd>
Relatively Link file or directory contents to destination.


<h3>Parameters</h3>
<ul>
	
	<li>
	  src: string: Path or file to link.
	</li>
	
	<li>
	  dest: string: Destination to link to.
	</li>
	
	<li>
	  from: string: Directory to link from, by default curDir.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="unzip"></a><strong>unzip</strong>&nbsp;(archive, dest)</dt>
<dd>
Unpack an archive. Extract the contents of an archive, detecting its format by filename extension.


<h3>Parameters</h3>
<ul>
	
	<li>
	  archive: string: Filename of archive.
	</li>
	
	<li>
	  dest: 
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>




<dt><a name="zip"></a><strong>zip</strong>&nbsp;(workdir, zipfile, ...)</dt>
<dd>
Compress files in a .zip archive.


<h3>Parameters</h3>
<ul>
	
	<li>
	  workdir: 
	</li>
	
	<li>
	  zipfile: string: pathname of .zip archive to be created.
	</li>
	
	<li>
	  ...: Filenames to be stored in the archive are given as additional arguments.
	</li>
	
</ul>






<h3>Return value:</h3>
ok, log: true on success, false on failure and log message.



</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
